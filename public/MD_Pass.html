<!doctype html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ù…Ø±ÙˆØ± Ø¯ÙˆØ±ÙŠ - Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --bg: #f4f7f6;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .search-box {
            position: relative;
            margin-bottom: 30px;
        }

        #customerSearch {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--accent);
            border-radius: 12px;
            font-size: 1.1rem;
            font-family: 'Cairo';
            box-sizing: border-box;
        }

        .search-results {
            position: absolute;
            top: 105%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 10px;
            z-index: 1000;
            max-height: 250px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .search-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
        }

        .search-item:hover {
            background: #f0f7ff;
            color: var(--accent);
        }

        .customer-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background: #ffffff;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 1px solid #e1e8ed;
            border-top: 5px solid var(--accent);
        }

        .info-item label {
            display: block;
            font-weight: bold;
            color: #555;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .info-item input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Cairo';
            font-weight: bold;
        }

        .info-item span {
            font-weight: 700;
            color: var(--primary);
            display: block;
            padding: 5px 0;
        }

        .passing-header {
            background: #fff9e6;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-align: center;
            border: 1px solid #ffeeba;
        }

        #passing_date {
            padding: 10px 20px;
            border: 2px solid var(--warning);
            border-radius: 8px;
            font-family: 'Cairo';
            font-weight: bold;
        }

        .table-wrapper {
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid #eee;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            min-width: 1000px;
        }

        table th {
            background: var(--primary);
            color: white;
            padding: 15px;
            font-size: 0.85rem;
        }

        table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            text-align: center;
            vertical-align: top;
        }

        .new-input {
            width: 100px;
            padding: 10px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        .new-input:focus {
            border-color: var(--success);
            outline: none;
            background: #fafffa;
        }

        .note-area {
            width: 100%;
            min-width: 200px;
            height: 70px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-family: 'Cairo';
            font-size: 0.9rem;
            resize: vertical;
            box-sizing: border-box;
            background: #fdfdfd;
            transition: all 0.3s;
        }

        .note-area:focus {
            border-color: var(--accent);
            background: white;
            outline: none;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.2);
        }

        .btn-save {
            background: var(--success);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 12px;
            width: 100%;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .btn-save:hover {
            background: #219150;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .section-title {
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-dot {
            background: var(--success);
            width: 5px;
            height: 20px;
            border-radius: 5px;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
        .modern-dropdown {
            position: relative;
            margin-bottom: 20px;
            width: 100%;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .dropdown-btn {
            background: var(--primary);
            color: white;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid var(--accent);
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: 0.3s;
        }

        .dropdown-btn:hover {
            background: var(--accent);
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø®ÙÙŠØ© */
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            display: none;
            /* Ù…Ø®ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            z-index: 2000;
            margin-top: 5px;
            border: 1px solid #ddd;
            overflow: hidden;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .dropdown-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: 0.2s;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: #f4f7f6;
            color: var(--accent);
            padding-right: 25px;
            /* ØªØ£Ø«ÙŠØ± Ø­Ø±ÙƒØ© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        }

        /* ÙƒÙ„Ø§Ø³ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ø¨Ø± JS */
        .show {
            display: block !important;
        }
    </style>
</head>

<body>
    <div class="container">

        <div class="input-group" style="margin-bottom: 0;">


            <div class="modern-dropdown">
                <button class="dropdown-btn" id="dropdownBtn">
                    <span>ğŸš€ Ø§Ø®ØªØ± ÙˆØ¬Ù‡ØªÙƒ Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„</span>
                    <span id="arrow">â–¾</span>
                </button>
                <div class="dropdown-menu" id="dropdownMenu">
                    <div class="dropdown-item" data-page="MD.html">ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ¨Ø§Ø± Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</div>
                    <div class="dropdown-item" data-page="MD_Add.html">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±Ùƒ Ø¬Ø¯ÙŠØ¯</div>
                    <div class="dropdown-item" data-page="MD_Pass.html">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ù…Ø±ÙˆØ± Ù…ÙŠØ¯Ø§Ù†ÙŠ</div>
                    <div class="dropdown-item" data-page="MD_Pass_Dashboard.html">ğŸ“… ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¹Ø§Ù…</div>
                    <div class="dropdown-item" data-page="index.html">ğŸ“… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const btn = document.getElementById('dropdownBtn');
                    const menu = document.getElementById('dropdownMenu');

                    // 1. ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
                    btn.addEventListener('click', function (e) {
                        e.stopPropagation(); // Ù…Ù†Ø¹ Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ø¶ØºØ·Ø© Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø¨
                        menu.classList.toggle('show');
                    });

                    // 2. Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø®ÙŠØ§Ø±
                    const items = document.querySelectorAll('.dropdown-item');
                    items.forEach(item => {
                        item.addEventListener('click', function () {
                            const page = this.getAttribute('data-page');
                            if (page) {
                                window.location.href = page;
                            }
                        });
                    });

                    // 3. Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ø°Ø§ Ø¶ØºØ·Øª ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ø®Ø§Ø±Ø¬Ù‡Ø§
                    window.addEventListener('click', function () {
                        if (menu.classList.contains('show')) {
                            menu.classList.remove('show');
                        }
                    });
                });
            </script>


            <h2 style="text-align: center; color: var(--primary);">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ ÙƒØ¨Ø§Ø± Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† (MD_Pass)</h2>

            <div class="search-box">
                <label style="font-weight: bold; display: block; margin-bottom: 8px;">Ø§Ø³Ù… Ø§Ù„Ù…Ø´ØªØ±Ùƒ:</label>
                <input type="text" id="customerSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ù‡Ù†Ø§..." autocomplete="off">
                <div id="searchResults" class="search-results"></div>
            </div>

            <div id="mainContent" class="hidden">
                <div class="passing-header">
                    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ÙØ¹Ù„ÙŠ:</label>
                    <input type="date" id="passing_date" disabled>
                </div>

                <div class="section-title">
                    <div class="section-dot" style="background: var(--accent);"></div>
                    Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                </div>

                <div class="customer-info-grid">
                    <div class="info-item"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´ØªØ±Ùƒ:</label><span id="disp_name"></span></div>
                    <div class="info-item"><label>Ø§Ù„Ù‚Ø·Ø§Ø¹:</label><span id="disp_keta3"></span></div>
                    <div class="info-item"><label>Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©:</label><span id="disp_handsa"></span></div>
                    <div class="info-item">
                        <label>Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ù‚Ø¯Ø±Ø© (PF):</label>
                        <input type="number" step="0.01" id="edit_pf">
                    </div>
                    <div class="info-item">
                        <label>Ø£Ù‚ØµÙ‰ Ø­Ù…Ù„:</label>
                        <input type="number" id="edit_max">
                    </div>
                </div>

                <div class="section-title">
                    <div class="section-dot"></div>
                    Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙÙ†ÙŠØ©
                </div>

                <div class="table-wrapper">
                    <table id="metersTable">
                        <thead>
                            <tr>
                                <th width="10%">Ø±Ù‚Ù… Ø§Ù„Ø¹Ø¯Ø§Ø¯</th>
                                <th width="15%">Ø§Ù„Ù…ÙƒØ§Ù† / Ø§Ù„Ø«Ø§Ø¨Øª</th>
                                <th width="10%">Ø§Ù„Ù…Ø­ÙˆÙ„Ø§Øª</th>
                                <th style="background: #34495e;">Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (kWh)</th>
                                <th style="background: #34495e;">Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (kVARh)</th>
                                <th style="background: #27ae60;">Ø§Ù„Ø­Ø§Ù„ÙŠØ© (kWh)</th>
                                <th style="background: #27ae60;">Ø§Ù„Ø­Ø§Ù„ÙŠØ© (kVARh)</th>
                                <th width="25%">Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙ†ÙŠØ© </th>
                            </tr>
                        </thead>
                        <tbody id="metersBody"></tbody>
                    </table>
                </div>

                <button class="btn-save" onclick="savePassingRecord()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„</button>
            </div>
        </div>

        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
            import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";

            const firebaseConfig = {
                apiKey: "AIzaSyCTSWDR3IvFpzp8UARsClrpwbRtTwr12jA",
                databaseURL: "https://ndedc-meter-calib-default-rtdb.firebaseio.com",
            };

            const app = initializeApp(firebaseConfig);
            const db = getDatabase(app);

            let allCustomers = {};
            let selectedCustomerKey = "";

            async function fetchAllForSearch() {
                const snapshot = await get(ref(db, 'MD/customers'));
                if (snapshot.exists()) { allCustomers = snapshot.val(); }
            }

            const searchInput = document.getElementById('customerSearch');
            const resultsDiv = document.getElementById('searchResults');

            searchInput.addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase();
                resultsDiv.innerHTML = '';
                if (!term) { resultsDiv.style.display = 'none'; return; }
                let found = false;
                for (let key in allCustomers) {
                    if (allCustomers[key].metername.toLowerCase().includes(term)) {
                        const item = document.createElement('div');
                        item.className = 'search-item';
                        item.innerText = allCustomers[key].metername;
                        item.onclick = () => selectCustomer(key);
                        resultsDiv.appendChild(item);
                        found = true;
                    }
                }
                resultsDiv.style.display = found ? 'block' : 'none';
            });

            window.selectCustomer = function (key) {
                selectedCustomerKey = key;
                const data = allCustomers[key];
                searchInput.value = data.metername;
                resultsDiv.style.display = 'none';

                document.getElementById('disp_name').innerText = data.metername;
                document.getElementById('disp_keta3').innerText = data.keta3;
                document.getElementById('disp_handsa').innerText = data.handsa;
                document.getElementById('edit_pf').value = data.power_factor || 0;
                document.getElementById('edit_max').value = data.max_load || 0;

                const tbody = document.getElementById('metersBody');
                tbody.innerHTML = '';

                for (let mKey in data.meters) {
                    const meter = data.meters[mKey];
                    tbody.innerHTML += `
                    <tr class="meter-row" data-mkey="${mKey}" data-mno="${meter.meternumber}">
                        <td style="font-weight: bold;">${meter.meternumber}</td>
                        <td><small>${meter.location || '-'}<br>Const: ${meter.constant}</small></td>
                        <td><small>V:${meter.vt_ratio}<br>C:${meter.ct_ratio}</small></td>
                        <td style="background: #f8f9fa; font-weight: bold; color: #2980b9;">${meter.kwh_reading}</td>
                        <td style="background: #f8f9fa; font-weight: bold; color: #2980b9;">${meter.kvarh_reading}</td>
                        <td><input type="number" class="new-kwh new-input" placeholder="0"></td>
                        <td><input type="number" class="new-kvarh new-input" placeholder="0"></td>
                        <td><textarea class="visit-note note-area" placeholder="Ø£Ø¯Ø®Ù„ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙ†ÙŠØ©..."></textarea></td>
                    </tr>
                `;
                }

                document.getElementById('passing_date').value = new Date().toISOString().split('T')[0];
                document.getElementById('mainContent').classList.remove('hidden');
            };

            window.savePassingRecord = async function () {
                const passingDate = document.getElementById('passing_date').value;
                if (!passingDate) return Swal.fire("Ø®Ø·Ø£", "ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø±ÙˆØ±", "error");

                const rows = document.querySelectorAll('.meter-row');
                let readingsForPass = {};
                let updates = {};

                rows.forEach(row => {
                    const mKey = row.getAttribute('data-mkey');
                    const newKwh = row.querySelector('.new-kwh').value;
                    const newKvarh = row.querySelector('.new-kvarh').value;
                    const note = row.querySelector('.visit-note').value; // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù† Ø§Ù„ØªÙƒØ³Øª Ø£Ø±ÙŠØ§

                    // 1. Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ (MD_Pass)
                    readingsForPass[mKey] = {
                        meternumber: row.getAttribute('data-mno'),
                        kwh: newKwh || 0,
                        kvarh: newKvarh || 0,
                        note: note || ""
                    };

                    // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (MD/customers) Ù„Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ù‚Ø±Ø§Ø¡Ø§Øª Ù„Ù‡Ø§
                    if (newKwh !== "" || newKvarh !== "") {
                        const baseRef = `MD/customers/${selectedCustomerKey}/meters/${mKey}`;

                        if (newKwh !== "") updates[`${baseRef}/kwh_reading`] = parseFloat(newKwh);
                        if (newKvarh !== "") updates[`${baseRef}/kvarh_reading`] = parseFloat(newKvarh);

                        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙÙ†ÙŠØ© Ù„Ù„Ø¹Ø¯Ø§Ø¯
                        updates[`${baseRef}/meternotes`] = note || "";

                        // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„Ù„Ø¹Ø¯Ø§Ø¯
                        updates[`${baseRef}/inspection_date`] = passingDate;
                    }
                });

                // 3. ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ø§Ù„Ø¹Ø§Ù…Ø© (Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ù‚Ø¯Ø±Ø© ÙˆØ£Ù‚ØµÙ‰ Ø­Ù…Ù„)
                updates[`MD/customers/${selectedCustomerKey}/power_factor`] = document.getElementById('edit_pf').value;
                updates[`MD/customers/${selectedCustomerKey}/max_load`] = document.getElementById('edit_max').value;
                updates[`MD/customers/${selectedCustomerKey}/passing_date`] = document.getElementById('passing_date').value;

                // ØªØ¬Ù‡ÙŠØ² ÙƒØ§Ø¦Ù† Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„
                const historicalRecord = {
                    metername: document.getElementById('disp_name').innerText,
                    visit_date: passingDate,
                    readings: readingsForPass,
                    keta3: document.getElementById('disp_keta3').innerText,
                    handsa: document.getElementById('disp_handsa').innerText,
                    power_factor: document.getElementById('edit_pf').value,
                    max_load: document.getElementById('edit_max').value,
                    timestamp: new Date().getTime()
                };

                try {
                    Swal.fire({ title: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ...', didOpen: () => Swal.showLoading() });

                    // Ø­ÙØ¸ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                    await set(ref(db, `MD_Pass/${selectedCustomerKey}/${passingDate}`), historicalRecord);

                    // ØªÙ†ÙÙŠØ° ÙƒØ§ÙØ© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙŠ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
                    for (let path in updates) {
                        await set(ref(db, path), updates[path]);
                    }

                    Swal.fire("ØªÙ… Ø¨Ù†Ø¬Ø§Ø­", "ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§ØªØŒ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŒ ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©", "success")
                        .then(() => location.reload());
                } catch (e) {
                    console.error(e);
                    Swal.fire("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸", e.message, "error");
                }
            };

            fetchAllForSearch();
        </script>
</body>

</html>